#!/bin/bash
# <bitbar.title>Umbrella Status</bitbar.title>
# <bitbar.version>v1.0</bitbar.version>
# <bitbar.author>Jason Masker</bitbar.author>
# <bitbar.author.github>jasmas</bitbar.author.github>
# <bitbar.desc>Check and toggle status of Umbrella Roaming Security Module for Cisco AnyConnect.</bitbar.desc>

PLUGIN_BASE='/opt/cisco/anyconnect/bin/plugins'

IMG_DISABLED='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AC0AYgBlAHMAawByAGkAdgBlAGwAcwBlAFAAZQByAGYAaQBsACAAUgBHAEIAIABnAGUAbgDoAHIAaQBjAEMepQB1ACAAaADsAG4AaAAgAFIARwBCACAAQwBoAHUAbgBnAFAAZQByAGYAaQBsACAAUgBHAEIAIABHAGUAbgDpAHIAaQBjAG8EFwQwBDMEMAQ7BEwEPQQ4BDkAIAQ/BEAEPgREBDAEOQQ7ACAAUgBHAEIAUAByAG8AZgBpAGwAIABnAOkAbgDpAHIAaQBxAHUAZQAgAFIAVgBCAMEAbAB0AGEAbADhAG4AbwBzACAAUgBHAEIAIABwAHIAbwBmAGkAbJAadSgAIABSAEcAQgAggnJfaWPPj/AARwBlAG4AZQByAGkAcwBrACAAUgBHAEIALQBwAHIAbwBmAGkAbABPAGIAZQBjAG4A/QAgAFIARwBCACAAcAByAG8AZgBpAGwF5AXoBdUF5AXZBdwAIABSAEcAQgAgBdsF3AXcBdkAUAByAG8AZgBpAGwAbwAgAFIARwBCACAAZwBlAG4AZQByAGkAYwBvAFAAcgBvAGYAaQBsACAAUgBHAEIAIABnAGUAbgBlAHIAaQBjAEEAbABsAGcAZQBtAGUAaQBuAGUAcwAgAFIARwBCAC0AUAByAG8AZgBpAGzHfLwYACAAUgBHAEIAINUEuFzTDMd8Zm6QGgAgAFIARwBCACBjz4/wZYdO9k4AgiwAIABSAEcAQgAgMNcw7TDVMKEwpDDrA5MDtQO9A7kDugPMACADwAPBA78DxgOvA7sAIABSAEcAQgBQAGUAcgBmAGkAbAAgAFIARwBCACAAZwBlAG4A6QByAGkAYwBvAEEAbABnAGUAbQBlAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGUAbA5CDhsOIw5EDh8OJQ5MACAAUgBHAEIAIA4XDjEOSA4nDkQOGwBHAGUAbgBlAGwAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGkAWQBsAGUAaQBuAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGkAbABpAEcAZQBuAGUAcgBpAQ0AawBpACAAUgBHAEIAIABwAHIAbwBmAGkAbABVAG4AaQB3AGUAcgBzAGEAbABuAHkAIABwAHIAbwBmAGkAbAAgAFIARwBCBB4EMQRJBDgEOQAgBD8EQAQ+BEQEOAQ7BEwAIABSAEcAQgZFBkQGQQAgBioGOQYxBkoGQQAgAFIARwBCACAGJwZEBjkGJwZFAEcAZQBuAGUAcgBpAGMAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGV0ZXh0AAAAAENvcHlyaWdodCAyMDA3IEFwcGxlIEluYy4sIGFsbCByaWdodHMgcmVzZXJ2ZWQuAFhZWiAAAAAAAADzUgABAAAAARbPWFlaIAAAAAAAAHRNAAA97gAAA9BYWVogAAAAAAAAWnUAAKxzAAAXNFhZWiAAAAAAAAAoGgAAFZ8AALg2Y3VydgAAAAAAAAABAc0AAHNmMzIAAAAAAAEMQgAABd7///MmAAAHkgAA/ZH///ui///9owAAA9wAAMBs'
IMG_ENABLED='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AC0AYgBlAHMAawByAGkAdgBlAGwAcwBlAFAAZQByAGYAaQBsACAAUgBHAEIAIABnAGUAbgDoAHIAaQBjAEMepQB1ACAAaADsAG4AaAAgAFIARwBCACAAQwBoAHUAbgBnAFAAZQByAGYAaQBsACAAUgBHAEIAIABHAGUAbgDpAHIAaQBjAG8EFwQwBDMEMAQ7BEwEPQQ4BDkAIAQ/BEAEPgREBDAEOQQ7ACAAUgBHAEIAUAByAG8AZgBpAGwAIABnAOkAbgDpAHIAaQBxAHUAZQAgAFIAVgBCAMEAbAB0AGEAbADhAG4AbwBzACAAUgBHAEIAIABwAHIAbwBmAGkAbJAadSgAIABSAEcAQgAggnJfaWPPj/AARwBlAG4AZQByAGkAcwBrACAAUgBHAEIALQBwAHIAbwBmAGkAbABPAGIAZQBjAG4A/QAgAFIARwBCACAAcAByAG8AZgBpAGwF5AXoBdUF5AXZBdwAIABSAEcAQgAgBdsF3AXcBdkAUAByAG8AZgBpAGwAbwAgAFIARwBCACAAZwBlAG4AZQByAGkAYwBvAFAAcgBvAGYAaQBsACAAUgBHAEIAIABnAGUAbgBlAHIAaQBjAEEAbABsAGcAZQBtAGUAaQBuAGUAcwAgAFIARwBCAC0AUAByAG8AZgBpAGzHfLwYACAAUgBHAEIAINUEuFzTDMd8Zm6QGgAgAFIARwBCACBjz4/wZYdO9k4AgiwAIABSAEcAQgAgMNcw7TDVMKEwpDDrA5MDtQO9A7kDugPMACADwAPBA78DxgOvA7sAIABSAEcAQgBQAGUAcgBmAGkAbAAgAFIARwBCACAAZwBlAG4A6QByAGkAYwBvAEEAbABnAGUAbQBlAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGUAbA5CDhsOIw5EDh8OJQ5MACAAUgBHAEIAIA4XDjEOSA4nDkQOGwBHAGUAbgBlAGwAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGkAWQBsAGUAaQBuAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGkAbABpAEcAZQBuAGUAcgBpAQ0AawBpACAAUgBHAEIAIABwAHIAbwBmAGkAbABVAG4AaQB3AGUAcgBzAGEAbABuAHkAIABwAHIAbwBmAGkAbAAgAFIARwBCBB4EMQRJBDgEOQAgBD8EQAQ+BEQEOAQ7BEwAIABSAEcAQgZFBkQGQQAgBioGOQYxBkoGQQAgAFIARwBCACAGJwZEBjkGJwZFAEcAZQBuAGUAcgBpAGMAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGV0ZXh0AAAAAENvcHlyaWdodCAyMDA3IEFwcGxlIEluYy4sIGFsbCByaWdodHMgcmVzZXJ2ZWQuAFhZWiAAAAAAAADzUgABAAAAARbPWFlaIAAAAAAAAHRNAAA97gAAA9BYWVogAAAAAAAAWnUAAKxzAAAXNFhZWiAAAAAAAAAoGgAAFZ8AALg2Y3VydgAAAAAAAAABAc0AAHNmMzIAAAAAAAEMQgAABd7///MmAAAHkgAA/ZH///ui///9owAAA9wAAMBs'

# Check plugin status, return 0 if enabled, 1 if disabled
function check_status {
    [[ -f $PLUGIN_BASE/libacumbrellaapi.dylib ]] &&
    [[ -f $PLUGIN_BASE/libacumbrellactrl.dylib ]] &&
    [[ -f $PLUGIN_BASE/libacumbrellaplugin.dylib ]]
}

# Check if plugin disabled by utility, return 0 if yes, 1 if no
function verify_plugin_disabled {
    [[ -f $PLUGIN_BASE/disabled/libacumbrellaapi.dylib ]] &&
    [[ -f $PLUGIN_BASE/disabled/libacumbrellactrl.dylib ]] &&
    [[ -f $PLUGIN_BASE/disabled/libacumbrellaplugin.dylib ]]
}

# Disable plugin
function disable_plugin {
    /usr/bin/osascript -e "do shell script \"mkdir -p $PLUGIN_BASE/disabled && mv -f $PLUGIN_BASE/libacumbrellaapi.dylib $PLUGIN_BASE/libacumbrellactrl.dylib $PLUGIN_BASE/libacumbrellaplugin.dylib $PLUGIN_BASE/disabled/\" with administrator privileges"
}

# Enable plugin
function enable_plugin {
    /usr/bin/osascript -e "do shell script \"mv -f $PLUGIN_BASE/disabled/libacumbrellaapi.dylib $PLUGIN_BASE/disabled/libacumbrellactrl.dylib $PLUGIN_BASE/disabled/libacumbrellaplugin.dylib $PLUGIN_BASE/\" with administrator privileges"
}

case "$1" in
    'e')
        verify_plugin_disabled &&
        enable_plugin
        ;;
    'd')
        check_status &&
        disable_plugin
        ;;
    *)
        check_status &&
        echo "| image=$IMG_ENABLED" ||
        echo "| image=$IMG_DISABLED"

        echo '---'

        verify_plugin_disabled &&
        echo "Enable Cisco Umbrella| terminal=false refresh=true bash=\"$0\" param1=e"

        check_status &&
        echo "Disable Cisco Umbrella| terminal=false refresh=true bash=\"$0\" param1=d"

esac

